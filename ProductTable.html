<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin — Products (API)</title>
  <link rel="stylesheet" href="css/ProductTable.css" />
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Products — Admin</h1>
        <div style="margin-top:8px;color:var(--muted);font-size:13px">Search & manage products (API-driven)</div>
      </div>

      <div style="display:flex;gap:12px;align-items:center">
        <div class="search"><svg width="16"height="16"viewBox="0 0 24 24"fill="none"stroke="currentColor"stroke-width="2"stroke-linecap="round"stroke-linejoin="round"><path d="M21 21l-4.35-4.35"></path><circle cx="11" cy="11" r="6"></circle></svg><input id="searchInput" placeholder="Search term (e.g. tablet)"/></div>
        <button id="addProductBtn" class="btn">+ Add</button>
      </div>
    </header>

    <div class="filters">
      <div class="filter">
        <label>Category</label>
        <!-- category dropdown will be populated by script (data-id = GUID) -->
        <div class="dropdown" data-type="category" id="categoryDropdown">Loading...
          <div class="dropdown-menu" id="categoryMenu"></div>
        </div>
      </div>

      <div class="filter">
        <label>Brand</label>
        <div class="dropdown" data-type="brand" id="brandDropdown">Loading...
          <div class="dropdown-menu" id="brandMenu"></div>
        </div>
      </div>

      <!-- <div class="filter">
        <label>Sort</label>
        <div class="dropdown" data-type="sort" id="sortDropdown">Default
          <div class="dropdown-menu">
            <div class="opt" data-id="default">Default</div>
            <div class="opt" data-id="name_asc">Name (A–Z)</div>
            <div class="opt" data-id="price_asc">Price (Low → High)</div>
            <div class="opt" data-id="price_desc">Price (High → Low)</div>
          </div>
        </div>
      </div> -->
    </div>

    <table aria-label="Products table">
      <thead>
        <tr>
          <th>Image</th>
          <th>Name</th>
          <th>Category Name</th>
          <th>Brand Name</th>
          <th>Price</th>
          <th style="text-align:right">Actions</th>
        </tr>
      </thead>
      <tbody id="tbody">
        <!-- rows come from script.js -->
      </tbody>
    </table>

<div id="pagination" style="margin-top:20px;display:flex;justify-content:center;gap:6px;flex-wrap:wrap;"></div>
  </div>
<!-- Add / Edit Modal -->
<div class="overlay" id="modalOverlay">
  <div class="modal" id="modalBox" style="width: 900px; height: 500px;">
    <h2 id="modalTitle">Edit Product</h2>
    <form id="modalForm" enctype="multipart/form-data">
      <input type="hidden" id="productId">
      
      <!-- Row 1: Name and Description -->
      <div class="row" style="margin-bottom:10px; display:flex; gap:10px;">
        <div style="flex:1">
          <label>Name</label>
          <input id="pName" required>
        </div>
        <div style="flex:1">
          <label>Description</label>
          <input id="pDescription" required>
        </div>
      </div>
      
      <!-- Row 2: Model Year and Price -->
      <div class="row" style="margin-bottom:10px; display:flex; gap:10px;">
        <div style="flex:1">
          <label>Model Year</label>
          <input id="pYear" type="number" min="1900" step="1">
        </div>
        <div style="flex:1">
          <label>Price (USD)</label>
          <input id="pPrice" type="number" min="0" step="0.01">
        </div>
      </div>
      
      <!-- Row 3: Image and Category -->
      <div class="row" style="margin-bottom:10px; display:flex; gap:10px;">
          <div style="flex:1">
          <label>Brand</label>
          <select id="pBrand" required>
            <option value="">Select Brand</option>
            <!-- Options will be populated dynamically -->
          </select>
        </div>
        <div style="flex:1;">
        <label>Category</label>
        <select id="pCategory" required>
            <option value="">Select Category</option>
            <!-- Options will be populated dynamically -->
        </select>
    </div>
</div>

<!-- Row 4: Brand (full width since it's the last one) -->
<div class="row" style="margin-bottom:10px;">
      
            <div style="flex:1">
          <label>Image</label>
          <input id="pImg" type="file" multiple>
        </div>
      </div>
<div id="error-message" style="color: red;"></div>
      <div class="actions-row">
        <button type="button" class="btn-muted" id="cancelModal">Cancel</button>
        <button type="submit" class="btn-primary" id="saveModal">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- View Modal -->
<div class="overlay" id="viewOverlay">
  <div class="modal view-modal" style="width: 1000px;">  <!-- Increased max-width for better space -->
    <h2 id="viewTitle" class="modal-title">Product Details</h2>
    
    <div class="view-content">
      <!-- Image Section -->
      <div class="image-section">
        <img id="viewImg" src="" alt="Main Product Image" class="main-image">
        
        <!-- Thumbnails: Horizontal scrollable container -->
        <div id="viewThumbnails" class="thumbnails-container"></div>
      </div>
      
      <!-- Details Section -->
      <div class="details-section">
        <div id="viewName" class="product-name"></div>
        <div id="viewDescription" class="product-description"></div>
        <div id="viewPrice" class="product-price"></div>
        <div id="viewBrand" class="product-brand"></div>
        <div id="viewCategory" class="product-category"></div>
        <div id="viewYear" class="product-year"></div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-muted" id="closeView">Close</button>
    </div>
  </div>
</div>

  <!-- Delete Confirm Modal -->
  <div class="overlay" id="deleteOverlay">
    <div class="modal" style="max-width:420px">
      <h2>Delete product?</h2>
      <div id="deleteMsg" style="color:var(--muted);margin-top:8px">Are you sure?</div>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:14px">
        <button class="btn-muted" id="cancelDelete">Cancel</button>
        <button class="btn-primary" id="confirmDelete">Delete</button>
      </div>
    </div>
  </div>



  
  <script src="js/ProductTable.js"></script>
</body>
</html>
